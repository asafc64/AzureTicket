{
   "contentVersion":"1.0.0.0",
   "resources":[
      {
         "properties":{
            "hardwareProfile":{
               "vmSize":"Basic_A1"
            },
            "storageProfile":{
               "imageReference":{
                  "publisher":"Canonical",
                  "offer":"UbuntuServer",
                  "sku":"16.04-LTS",
                  "version":"latest"
               },
               "osDisk":{
                  "createOption":"FromImage",
                  "managedDisk":{
                     "storageAccountType":"Standard_LRS"
                  }
               },
               "dataDisks":[
                  
               ]
            },
            "networkProfile":{
               "networkInterfaces":[
                  {
                     "id":"[resourceId('Microsoft.Network/networkInterfaces/','chronos_nic')]"
                  }
               ]
            },
            "osProfile":{
               "adminUsername":"adminuser",
               "adminPassword":"ydpPwC6Qx6u?S4UTa",
               "computerName":"chronos",
               "linuxConfiguration":{
                  "disablePasswordAuthentication":false
               }
            }
         },
         "type":"Microsoft.Compute/virtualMachines",
         "tags":{
            "colony-space-id":"2630148b-8c7e-4003-9d3f-a646c9616009",
            "colony-tags-version":"13",
            "colony-mgmt-resource-group":"colony-zjvmogqwzwvk9593",
            "colony-environment":"assafPC",
            "colony-sandbox-name":"Assaf - chronos-azure-qualiy-off",
            "colony-space-name":"Trial",
            "colony-blueprint-name":"chronos-azure-qualiy-off",
            "colony-owner-email":"assaf.c@quali.com",
            "colony-cloud-account-id":"010fb777-e6bd-4d8b-9a32-517b34817190",
            "colony-deployment-type":"sandbox",
            "colony-sandbox-id":"wwy7f30q0413z2",
            "colony-environment-id":"wwy7f30q0413z2",
            "colony-app-name":"chronos",
            "colony-external-ports":"chronos-client:3000",
            "colony-internal-ports":"chronos-server:3001,chronos-client:3000",
            "colony-instance-logical-id":"ad81560ac25648799a71e9edbd1b29b2"
         },
         "location":"[resourceGroup().location]",
         "name":"chronos",
         "apiVersion":"2019-12-01",
         "dependsOn":[
            
         ]
      },
      {
         "properties":{
            "publisher":"Microsoft.Azure.Extensions",
            "type":"CustomScript",
            "autoUpgradeMinorVersion":true,
            "typeHandlerVersion":"2.0",
            "protectedSettings":{
               "commandToExecute":"while true; do sleep 5; wget colonySidecar.wwy7f30q0413z2.sandbox.com:4000 && break; done",
               "fileUris":[]
            }
         },
         "type":"Microsoft.Compute/virtualMachines/extensions",
         "dependsOn":[
            "[resourceId('Microsoft.Compute/virtualMachines/','chronos')]"
         ],
         "location":"[resourceGroup().location]",
         "name":"chronos/CustomScriptForLinux",
         "apiVersion":"2017-12-01"
      },
      {
         "properties":{
            "ttl":3600,
            "aRecords":[
               {
                  "ipv4Address":"[reference(resourceId('Microsoft.Network/networkInterfaces/','chronos_nic'), '2017-10-01').ipConfigurations[0].properties.privateIPAddress]"
               }
            ]
         },
         "type":"Microsoft.Network/privateDnsZones/A",
         "location":"global",
         "dependsOn":[
            
         ],
         "name":"wwy7f30q0413z2.sandbox.com/chronos-server",
         "apiVersion":"2018-09-01"
      },
      {
         "properties":{
            "ttl":3600,
            "aRecords":[
               {
                  "ipv4Address":"[reference(resourceId('Microsoft.Network/networkInterfaces/','chronos_nic'), '2017-10-01').ipConfigurations[0].properties.privateIPAddress]"
               }
            ]
         },
         "type":"Microsoft.Network/privateDnsZones/A",
         "location":"global",
         "dependsOn":[
            
         ],
         "name":"wwy7f30q0413z2.sandbox.com/chronos-client",
         "apiVersion":"2018-09-01"
      },
      {
         "properties":{
            "hardwareProfile":{
               "vmSize":"Standard_D2_v3"
            },
            "storageProfile":{
               "imageReference":{
                  "publisher":"Canonical",
                  "offer":"UbuntuServer",
                  "sku":"16.04-LTS",
                  "version":"latest"
               },
               "osDisk":{
                  "createOption":"FromImage",
                  "managedDisk":{
                     "storageAccountType":"Standard_LRS"
                  }
               }
            },
            "osProfile":{
               "computerName":"colonySidecar",
               "adminUsername":"adminuser",
               "adminPassword":"Welcome1234567+",
               "linuxConfiguration":{
                  "disablePasswordAuthentication":false
               }
            },
            "networkProfile":{
               "networkInterfaces":[
                  {
                     "id":"[resourceId('Microsoft.Network/networkInterfaces/','colonySidecar_nic')]"
                  }
               ]
            }
         },
         "type":"Microsoft.Compute/virtualMachines",
         "tags":{
            "colony-space-id":"2630148b-8c7e-4003-9d3f-a646c9616009",
            "colony-tags-version":"13",
            "colony-mgmt-resource-group":"colony-zjvmogqwzwvk9593",
            "colony-environment":"assafPC",
            "colony-sandbox-name":"Assaf - chronos-azure-qualiy-off",
            "colony-space-name":"Trial",
            "colony-blueprint-name":"chronos-azure-qualiy-off",
            "colony-owner-email":"assaf.c@quali.com",
            "colony-cloud-account-id":"010fb777-e6bd-4d8b-9a32-517b34817190",
            "colony-deployment-type":"sandbox",
            "colony-sandbox-id":"wwy7f30q0413z2",
            "colony-environment-id":"wwy7f30q0413z2",
            "colony-app-name":"colonySidecar"
         },
         "identity":{
            "type":"SystemAssigned, UserAssigned",
            "userAssignedIdentities":{
               "/subscriptions/24aae708-4612-497c-a91e-7ec5c657f9db/resourcegroups/colony-zjvmogqwzwvk9593/providers/Microsoft.ManagedIdentity/userAssignedIdentities/colony-zjvmogqwzwvk9593-sidecar-identity":{
                  
               }
            }
         },
         "location":"[resourceGroup().location]",
         "name":"colonySidecar",
         "apiVersion":"2019-12-01",
         "dependsOn":[
            
         ]
      },
      {
         "properties":{
            "publisher":"Microsoft.Azure.Extensions",
            "type":"CustomScript",
            "autoUpgradeMinorVersion":true,
            "typeHandlerVersion":"2.0",
            "protectedSettings":{
               "commandToExecute":"echo -e 'HTTP/1.1 200 OK\n\n It works!!!!' | nc -l 4000",
               "fileUris":[]
            }
         },
         "type":"Microsoft.Compute/virtualMachines/extensions",
         "dependsOn":[
            "[resourceId('Microsoft.Compute/virtualMachines/','colonySidecar')]"
         ],
         "location":"[resourceGroup().location]",
         "name":"colonySidecar/CustomScriptForLinux",
         "apiVersion":"2017-12-01"
      },
      {
         "properties":{
            "ttl":3600,
            "aRecords":[
               {
                  "ipv4Address":"[reference(resourceId('Microsoft.Network/networkInterfaces/','colonySidecar_nic'), '2017-10-01').ipConfigurations[0].properties.privateIPAddress]"
               }
            ]
         },
         "type":"Microsoft.Network/privateDnsZones/A",
         "location":"global",
         "dependsOn":[
            
         ],
         "name":"wwy7f30q0413z2.sandbox.com/colonySidecar",
         "apiVersion":"2018-09-01"
      },
      {
         "properties":{
            "hardwareProfile":{
               "vmSize":"Standard_D2_v3"
            },
            "storageProfile":{
               "imageReference":{
                  "publisher":"Canonical",
                  "offer":"UbuntuServer",
                  "sku":"16.04-LTS",
                  "version":"latest"
               },
               "osDisk":{
                  "createOption":"FromImage",
                  "managedDisk":{
                     "storageAccountType":"Standard_LRS"
                  }
               }
            },
            "osProfile":{
               "computerName":"colonyDebugService",
               "adminUsername":"adminuser",
               "adminPassword":"Welcome1234567+",
               "linuxConfiguration":{
                  "disablePasswordAuthentication":false
               }
            },
            "networkProfile":{
               "networkInterfaces":[
                  {
                     "id":"[resourceId('Microsoft.Network/networkInterfaces/','colonyDebugService_nic')]"
                  }
               ]
            }
         },
         "type":"Microsoft.Compute/virtualMachines",
         "tags":{
            "colony-space-id":"2630148b-8c7e-4003-9d3f-a646c9616009",
            "colony-tags-version":"13",
            "colony-mgmt-resource-group":"colony-zjvmogqwzwvk9593",
            "colony-environment":"assafPC",
            "colony-sandbox-name":"Assaf - chronos-azure-qualiy-off",
            "colony-space-name":"Trial",
            "colony-blueprint-name":"chronos-azure-qualiy-off",
            "colony-owner-email":"assaf.c@quali.com",
            "colony-cloud-account-id":"010fb777-e6bd-4d8b-9a32-517b34817190",
            "colony-deployment-type":"sandbox",
            "colony-sandbox-id":"wwy7f30q0413z2",
            "colony-environment-id":"wwy7f30q0413z2",
            "colony-app-name":"colonyDebugService"
         },
         "location":"[resourceGroup().location]",
         "name":"colonyDebugService",
         "apiVersion":"2019-12-01",
         "dependsOn":[
            
         ]
      },
      {
         "properties":{
            "publisher":"Microsoft.Azure.Extensions",
            "type":"CustomScript",
            "autoUpgradeMinorVersion":true,
            "typeHandlerVersion":"2.0",
            "protectedSettings":{
               "commandToExecute":"echo 'qualiy'",
               "fileUris":[]
            }
         },
         "type":"Microsoft.Compute/virtualMachines/extensions",
         "dependsOn":[
            "[resourceId('Microsoft.Compute/virtualMachines/','colonyDebugService')]"
         ],
         "location":"[resourceGroup().location]",
         "name":"colonyDebugService/CustomScriptForLinux",
         "apiVersion":"2017-12-01"
      },
      {
         "properties":{
            "ttl":3600,
            "aRecords":[
               {
                  "ipv4Address":"[reference(resourceId('Microsoft.Network/networkInterfaces/','colonyDebugService_nic'), '2017-10-01').ipConfigurations[0].properties.privateIPAddress]"
               }
            ]
         },
         "type":"Microsoft.Network/privateDnsZones/A",
         "location":"global",
         "dependsOn":[
            
         ],
         "name":"wwy7f30q0413z2.sandbox.com/colonyDebugService",
         "apiVersion":"2018-09-01"
      }
   ],
   "$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json"
}